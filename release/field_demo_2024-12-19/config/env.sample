# TheBox Environment Configuration Sample
# Copy this file to env/.thebox.env and modify as needed

# =============================================================================
# CORE SYSTEM CONFIGURATION
# =============================================================================

# Flask Configuration
SECRET_KEY=dev-key-change-in-production
THEBOX_WEB_HOST=0.0.0.0
THEBOX_WEB_PORT=80
THEBOX_TALKER_ID=XA

# Database
DB_PATH=thebox_mvp.sqlite

# =============================================================================
# BEARING AND ORIENTATION
# =============================================================================

# Global bow zero offset (degrees)
BOW_ZERO_DEG=0.0

# Plugin-specific bearing offsets (degrees)
DRONESHIELD_BEARING_OFFSET_DEG=0.0
TRAKKA_BEARING_OFFSET_DEG=0.0
VISION_BEARING_OFFSET_DEG=0.0
ACOUSTIC_BEARING_OFFSET_DEG=0.0

# =============================================================================
# SENSOR CONFIGURATION
# =============================================================================

# DroneShield DS-X Mk2
DRONESHIELD_INPUT_FILE=./data/DroneShield_Detections.txt
DRONESHIELD_UDP_PORT=56000
REPLAY_INTERVAL_MS=400

# Silvus FASST
SILVUS_UDP_HOST=0.0.0.0
SILVUS_UDP_PORT=50051
SILVUS_UDP_MODE=text
SILVUS_REPLAY_PATH=

# MARA Spotter
MARA_ENABLE=true
MARA_INPUT_MODE=udp
MARA_UDP_HOST=0.0.0.0
MARA_UDP_PORT=8787
MARA_TCP_HOST=127.0.0.1
MARA_TCP_PORT=9000
MARA_SERIAL_PORT=COM5
MARA_BAUD=115200
MARA_HEARTBEAT_SEC=10
MARA_MAX_QUEUE=10000

# Dspnor Dronnur 2D
DSPNOR_ENABLED=false
DSPNOR_SAFE_MODE=true
DSPNOR_DISCOVERY_MULTICAST=227.228.229.230
DSPNOR_DISCOVERY_PORT=59368
DSPNOR_INFO_TCP_PORT=59623
DSPNOR_CAT010_PROTO=udp
DSPNOR_CAT010_HOST=0.0.0.0
DSPNOR_CAT010_PORT=4010
DSPNOR_STATUS_PROTO=tcp
DSPNOR_STATUS_HOST=127.0.0.1
DSPNOR_STATUS_PORT=59623
DSPNOR_NMEA_UDP_PORT=60000
DSPNOR_INS_INJECT_ENABLED=false
DSPNOR_INS_INJECT_RATE_HZ=25
DSPNOR_BEARING_IS_RELATIVE=false
DSPNOR_RANGE_UNITS=m
DSPNOR_SPEED_UNITS=mps
DSPNOR_CONF_MAP=snr_db:linear:0:30
DSPNOR_MIN_CONF=0.05
DSPNOR_MAX_CONF=0.99
DSPNOR_BUFFER_BYTES=65536
DSPNOR_CONNECT_TIMEOUT_SEC=5
DSPNOR_MAX_MSG_RATE_HZ=200
DSPNOR_PUBLISH_TOPIC=detections.dspnor
DSPNOR_REBROADCAST_UDP_PORT=0
DSPNOR_LOG_LEVEL=INFO
DSPNOR_METRICS_PORT=0
DSPNOR_ALLOW_RESET=false
DSPNOR_ALLOW_REBOOT=false
DSPNOR_UNIT_SERIAL=

# Trakka TC-300
TRAKKA_DETECTION_MODE=ours
CAMERA_CONNECTED=false

# =============================================================================
# VISION CONFIGURATION
# =============================================================================

VISION_BACKEND=cpu
VISION_MODEL_PATH=
VISION_INPUT_RES=640
VISION_ROI_HALF_DEG=15.0
VISION_FRAME_SKIP=2
VISION_N_CONSEC_FOR_TRUE=3
VISION_LATENCY_MS=5000
VISION_MAX_DWELL_MS=7000
VISION_SWEEP_STEP_DEG=12.0
VISION_PRIORITY=balanced
VISION_VERDICT_DEFAULT=true
VISION_LABEL_DEFAULT=Object

# =============================================================================
# CONFIDENCE AND FUSION
# =============================================================================

CONFIDENCE_BASE=0.75
CONFIDENCE_TRUE=1.0
CONFIDENCE_FALSE=0.5
CONF_FUSION_METHOD=bayes
WEIGHT_RF=0.6
WEIGHT_VISION=0.4
WEIGHT_IR=0.4
WEIGHT_ACOUSTIC=0.25
CONF_HYSTERESIS=0.05

# =============================================================================
# RANGE ESTIMATION
# =============================================================================

RANGE_MODE=FIXED
RANGE_FIXED_KM=2.0
RANGE_RSSI_REF_DBM=-50.0
RANGE_RSSI_REF_KM=2.0
RANGE_MIN_KM=0.1
RANGE_MAX_KM=8.0
RANGE_EWMA_ALPHA=0.4

# =============================================================================
# FIELD OF VIEW SETTINGS
# =============================================================================

EO_FOV_WIDE_DEG=54.0
EO_FOV_NARROW_DEG=2.0
IR_FOV_WIDE_DEG=27.0
IR_FOV_NARROW_DEG=1.3

# =============================================================================
# SEACROSS INTEGRATION
# =============================================================================

SEACROSS_HOST=127.0.0.1
SEACROSS_PORT=2000
THEBOX_BROADCAST_IP=192.168.0.255
THEBOX_BROADCAST_PORT=62000

# =============================================================================
# SYNTHETIC RANGE ESTIMATION
# =============================================================================

THEBOX_MIN_SYNTH_RANGE_M=150
THEBOX_MAX_SYNTH_RANGE_M=1500
THEBOX_DEFAULT_SYNTH_RANGE_M=600
THEBOX_SYNTH_SMOOTHING_ALPHA=0.30
THEBOX_SYNTH_MIN_DIST_ERR_M=150
THEBOX_SYNTH_DIST_ERR_FRAC=0.30
THEBOX_SYNTH_DEFAULT_BRG_ERR=5.0
THEBOX_SYNTH_DEFAULT_ALT_M=0.0
THEBOX_SYNTH_DEFAULT_ALT_ERR=20.0

# =============================================================================
# STATE PERSISTENCE
# =============================================================================

THEBOX_STATE_PATH=data/state.json
THEBOX_STATE_SAVE_EVERY_SEC=3

# =============================================================================
# TEST AND DEVELOPMENT
# =============================================================================

TEST_DRY_RUN=true
TEST_DEFAULT_BEARING_DEG=45.0
TEST_DEFAULT_RSSI_DBM=-72
TEST_DEFAULT_NAME=DJI AUT XIA
TEST_DEFAULT_PROTOCOL=FHSS

# =============================================================================
# SETTINGS PROTECTION
# =============================================================================

SETTINGS_PROTECT=false
SETTINGS_PASSWORD=

# =============================================================================
# OUTPUT CONFIGURATION
# =============================================================================

OUT_REBROADCAST_ENABLE=false
OUT_UDP_HOST=127.0.0.1
OUT_UDP_PORT=7878
